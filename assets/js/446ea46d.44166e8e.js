"use strict";(self.webpackChunkjhipster_website=self.webpackChunkjhipster_website||[]).push([[5193],{52490:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var t=i(74848),s=i(28453);const r={title:"Setting up Continuous Integration",slug:"/setting-up-ci/",last_update:{date:new Date("2018-08-03T14:40:00.000Z")}},o=void 0,a={id:"tests-and-qa/setting-up-ci/index",title:"Setting up Continuous Integration",description:"Setting up Continuous Integration (CI) for a JHipster application is more complex than for a classic typical Spring MVC application because of the complexity associated with maintaining a build composed of 2 software stacks:",source:"@site/docs/tests-and-qa/setting-up-ci/index.mdx",sourceDirName:"tests-and-qa/setting-up-ci",slug:"/setting-up-ci/",permalink:"/setting-up-ci/",draft:!1,unlisted:!1,editUrl:"https://github.com/jhipster/jhipster.github.io/tree/main/docs/tests-and-qa/setting-up-ci/index.mdx",tags:[],version:"current",lastUpdatedAt:15333072e5,frontMatter:{title:"Setting up Continuous Integration",slug:"/setting-up-ci/",last_update:{date:"2018-08-03T14:40:00.000Z"}},sidebar:"docsSidebar",previous:{title:"Dependency Vulnerabilities Check",permalink:"/dependency-vulnerabities-check/"},next:{title:"Setting up a Jenkins 1 server",permalink:"/setting-up-ci-jenkins1/"}},l={},c=[{value:"Running the sub-generator",id:"running-the-sub-generator",level:2},{value:"What CI/CD pipeline do you want to generate ?",id:"what-cicd-pipeline-do-you-want-to-generate-",level:3},{value:"Would you like to perform the build in a Docker container ? (Jenkins / GitLab)",id:"would-you-like-to-perform-the-build-in-a-docker-container--jenkins--gitlab",level:3},{value:"In GitLab CI, perform the build in a docker container (hint: GitLab.com uses Docker container) ? (GitLab)",id:"in-gitlab-ci-perform-the-build-in-a-docker-container-hint-gitlabcom-uses-docker-container--gitlab",level:3},{value:"Would you like to send build status to GitLab ? (Jenkins)",id:"would-you-like-to-send-build-status-to-gitlab--jenkins",level:3},{value:"What tasks/integrations do you want to include ?",id:"what-tasksintegrations-do-you-want-to-include-",level:3},{value:"Deploy your application to an <em>Artifactory</em> (Jenkins / GitLab)",id:"deploy-your-application-to-an-artifactory-jenkins--gitlab",level:3},{value:"Analyze your code with <em>Sonar</em>",id:"analyze-your-code-with-sonar",level:3},{value:"Build and publish a <em>Docker</em> image",id:"build-and-publish-a-docker-image",level:3},{value:"Snyk: dependency scanning for security vulnerabilities",id:"snyk-dependency-scanning-for-security-vulnerabilities",level:3},{value:"Cypress Dashboard: record your tests in a web application provided by Cypress",id:"cypress-dashboard-record-your-tests-in-a-web-application-provided-by-cypress",level:3},{value:"Deploy to <em>Heroku</em>",id:"deploy-to-heroku",level:3},{value:"Additional information",id:"additional-information",level:2},{value:"Documentation about environment variables:",id:"documentation-about-environment-variables",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Setting up Continuous Integration (CI) for a JHipster application is more complex than for a classic typical Spring MVC application because of the complexity associated with maintaining a build composed of 2 software stacks:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"the Java back-end code with Maven or Gradle"}),"\n",(0,t.jsx)(n.li,{children:"the JavaScript front-end with NodeJS, NPM"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Each stack comes with its own dependency management (Maven artifacts, NPM packages) with potential conflicts to solve."}),"\n",(0,t.jsx)(n.p,{children:"JHipster should support the following CI systems out of the box:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Jenkins:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/setting-up-ci-jenkins1/",children:"Setting up Jenkins 1"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/setting-up-ci-jenkins2/",children:"Setting up Jenkins 2"})," (recommended)"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Travis: refer to the ",(0,t.jsx)(n.a,{href:"https://docs.travis-ci.com/user/getting-started/",children:"Travis Documentation"})]}),"\n",(0,t.jsxs)(n.li,{children:["GitLab CI: refer to the ",(0,t.jsx)(n.a,{href:"https://about.gitlab.com/gitlab-ci/",children:"GitLab CI Documentation"})]}),"\n",(0,t.jsxs)(n.li,{children:["Azure Pipelines: refer to the ",(0,t.jsx)(n.a,{href:"https://docs.microsoft.com/fr-fr/azure/devops/pipelines/?view=vsts",children:"Azure Pipelines Documentation"})]}),"\n",(0,t.jsxs)(n.li,{children:["GitHub Actions: refer to ",(0,t.jsx)(n.a,{href:"https://github.com/features/actions",children:"GitHub Actions Documentation"})]}),"\n",(0,t.jsxs)(n.li,{children:["CircleCI: refer to ",(0,t.jsx)(n.a,{href:"https://circleci.com/docs/",children:"CircleCI Documentation"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"running-the-sub-generator",children:"Running the sub-generator"}),"\n",(0,t.jsx)(n.p,{children:"To generate these config files, run this command in your project folder:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"jhipster ci-cd\n"})}),"\n",(0,t.jsx)(n.p,{children:"Then answer all the questions."}),"\n",(0,t.jsx)(n.h3,{id:"what-cicd-pipeline-do-you-want-to-generate-",children:"What CI/CD pipeline do you want to generate ?"}),"\n",(0,t.jsx)(n.p,{children:"The CI/CD pipeline you want to generate:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Jenkins pipeline"}),"\n",(0,t.jsx)(n.li,{children:"Azure Pipelines"}),"\n",(0,t.jsx)(n.li,{children:"GitLab CI"}),"\n",(0,t.jsx)(n.li,{children:"GitHub Actions"}),"\n",(0,t.jsx)(n.li,{children:"Travis CI"}),"\n",(0,t.jsx)(n.li,{children:"CircleCI"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": when you select Jenkins pipeline, a new ",(0,t.jsx)(n.code,{children:"src/main/docker/jenkins.yml"})," file will be generated.\nSo you can test Jenkins locally by running:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"docker-compose -f src/main/docker/jenkins.yml up -d\n"})}),"\n",(0,t.jsx)(n.h3,{id:"would-you-like-to-perform-the-build-in-a-docker-container--jenkins--gitlab",children:"Would you like to perform the build in a Docker container ? (Jenkins / GitLab)"}),"\n",(0,t.jsx)(n.p,{children:"If Docker is installed, you can perform the build inside a Docker container."}),"\n",(0,t.jsx)(n.h3,{id:"in-gitlab-ci-perform-the-build-in-a-docker-container-hint-gitlabcom-uses-docker-container--gitlab",children:"In GitLab CI, perform the build in a docker container (hint: GitLab.com uses Docker container) ? (GitLab)"}),"\n",(0,t.jsx)(n.p,{children:"If you use a private GitLab CI, you can use directly the runners."}),"\n",(0,t.jsx)(n.p,{children:"If you use official GitLab.com pipeline, you need to use Docker container."}),"\n",(0,t.jsx)(n.h3,{id:"would-you-like-to-send-build-status-to-gitlab--jenkins",children:"Would you like to send build status to GitLab ? (Jenkins)"}),"\n",(0,t.jsx)(n.p,{children:"If your Jenkins relies to a GitLab repository, you can send build status to GitLab. Your Jenkins must be correctly configured."}),"\n",(0,t.jsx)(n.h3,{id:"what-tasksintegrations-do-you-want-to-include-",children:"What tasks/integrations do you want to include ?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Deploy your application to an ",(0,t.jsx)(n.em,{children:"Artifactory"})]}),"\n",(0,t.jsxs)(n.li,{children:["Analyze your code with ",(0,t.jsx)(n.em,{children:"Sonar"})]}),"\n",(0,t.jsxs)(n.li,{children:["Build and publish a ",(0,t.jsx)(n.em,{children:"Docker"})," image"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"Snyk"}),": dependency scanning for security vulnerabilities (requires SNYK_TOKEN)"]}),"\n",(0,t.jsxs)(n.li,{children:["Deploy to ",(0,t.jsx)(n.em,{children:"Heroku"})," (requires HEROKU_API_KEY set on CI service)"]}),"\n",(0,t.jsx)(n.li,{children:"Would you like to enable the Cypress Dashboard (requires both CYPRESS_PROJECT_ID and CYPRESS_RECORD_KEY set on CI service)"}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"deploy-your-application-to-an-artifactory-jenkins--gitlab",children:["Deploy your application to an ",(0,t.jsx)(n.em,{children:"Artifactory"})," (Jenkins / GitLab)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"Artifactory"}),": what is the ID of distributionManagement for snapshots ?"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"Artifactory"}),": what is the URL of distributionManagement for snapshots ?"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"Artifactory"}),": what is the ID of distributionManagement for releases ?"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"Artifactory"}),": what is the URL of distributionManagement for releases ?"]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"analyze-your-code-with-sonar",children:["Analyze your code with ",(0,t.jsx)(n.em,{children:"Sonar"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"Sonar"}),": what is the name of the Sonar server ?"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Choose the name of the Sonar server, defined in your Jenkins Configuration."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"Sonar"}),": what is the URL of the Sonar server ?"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"Sonar"}),": what is the Organization of the Sonar server ?"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Here, you can choose to push your Sonar Analyze to ",(0,t.jsx)(n.a,{href:"https://sonarcloud.io",children:"SonarCloud.io"}),".\nIn this case, you have to add the ",(0,t.jsx)(n.code,{children:"SONAR_TOKEN"})," environment variable."]}),"\n",(0,t.jsxs)(n.h3,{id:"build-and-publish-a-docker-image",children:["Build and publish a ",(0,t.jsx)(n.em,{children:"Docker"})," image"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"Docker"}),": what is the URL of the Docker registry ?"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["By default, you can use Docker Hub: ",(0,t.jsx)(n.a,{href:"https://registry.hub.docker.com",children:"https://registry.hub.docker.com"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"Docker"}),": what is the Jenkins Credentials ID for the Docker registry ?"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["By default, you can use: ",(0,t.jsx)(n.code,{children:"docker login"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"Docker"}),": what is the Organization Name for the Docker registry ?"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"snyk-dependency-scanning-for-security-vulnerabilities",children:"Snyk: dependency scanning for security vulnerabilities"}),"\n",(0,t.jsxs)(n.p,{children:["You have to add the ",(0,t.jsx)(n.code,{children:"SNYK_TOKEN"})," environment variable (check your ",(0,t.jsx)(n.a,{href:"https://app.snyk.io/account",children:"Snyk account"}),")"]}),"\n",(0,t.jsxs)(n.p,{children:["See full documentation at ",(0,t.jsx)(n.a,{href:"https://snyk.io/",children:"https://snyk.io/"})]}),"\n",(0,t.jsx)(n.h3,{id:"cypress-dashboard-record-your-tests-in-a-web-application-provided-by-cypress",children:"Cypress Dashboard: record your tests in a web application provided by Cypress"}),"\n",(0,t.jsxs)(n.p,{children:["You have to add the ",(0,t.jsx)(n.code,{children:"CYPRESS_PROJECT_ID"})," and the ",(0,t.jsx)(n.code,{children:"CYPRESS_RECORD_KEY"})," environment variables (check your ",(0,t.jsx)(n.a,{href:"https://dashboard.cypress.io/",children:"Dashboard project"}),")"]}),"\n",(0,t.jsxs)(n.p,{children:["You can disable the record by changing ",(0,t.jsx)(n.code,{children:"CYPRESS_ENABLE_RECORD"})," environment variable value to false."]}),"\n",(0,t.jsxs)(n.p,{children:["See full the documentation at ",(0,t.jsx)(n.a,{href:"https://www.cypress.io/dashboard/",children:"cypress.io/dashboard"})]}),"\n",(0,t.jsxs)(n.h3,{id:"deploy-to-heroku",children:["Deploy to ",(0,t.jsx)(n.em,{children:"Heroku"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"*Heroku: name of your Heroku Application ?"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["You have to add the ",(0,t.jsx)(n.code,{children:"HEROKU_API_KEY"})," environment variable."]}),"\n",(0,t.jsxs)(n.p,{children:["Note: before using the deployment to Heroku, you need to use the ",(0,t.jsx)(n.a,{href:"/heroku",children:"Heroku sub-generator"})," locally.\nIt will create all files needed by your Continuous Integration Tool."]}),"\n",(0,t.jsx)(n.h2,{id:"additional-information",children:"Additional information"}),"\n",(0,t.jsx)(n.p,{children:"Depending on your OS and where you pushed your project, you will probably need to make the wrapper executable before using a CI/CD."}),"\n",(0,t.jsx)(n.p,{children:"If you use Maven:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"chmod +x mvnw"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"git update-index --chmod=+x mvnw"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"If you use Gradle:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"chmod +x gradlew"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"git update-index --chmod=+x gradlew"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"documentation-about-environment-variables",children:"Documentation about environment variables:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Jenkins pipeline: you should use the ",(0,t.jsx)(n.a,{href:"https://wiki.jenkins-ci.org/display/JENKINS/Credentials+Plugin",children:"Credentials plugin"})]}),"\n",(0,t.jsxs)(n.li,{children:["GitLab CI: read the ",(0,t.jsx)(n.a,{href:"https://docs.gitlab.com/ce/ci/variables/#secret-variables",children:"documentation about secret-variables"})]}),"\n",(0,t.jsxs)(n.li,{children:["Travis CI: read the ",(0,t.jsx)(n.a,{href:"https://docs.travis-ci.com/user/environment-variables/",children:"environment variables"})]}),"\n",(0,t.jsxs)(n.li,{children:["GitHub Actions: read the ",(0,t.jsx)(n.a,{href:"https://help.github.com/en/actions/configuring-and-managing-workflows/using-environment-variables",children:"documentation about environment variables"})]}),"\n",(0,t.jsxs)(n.li,{children:["Azure Pipelines: read the ",(0,t.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/azure/devops/pipelines/build/variables?view=azure-devops&tabs=yaml",children:"documentation about predefined variables"})]}),"\n",(0,t.jsxs)(n.li,{children:["CircleCI: read the ",(0,t.jsx)(n.a,{href:"https://circleci.com/docs/2.0/env-vars/#built-in-environment-variables",children:"documentation about environment variables"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var t=i(96540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);