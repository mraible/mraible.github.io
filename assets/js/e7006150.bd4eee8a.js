"use strict";(self.webpackChunkjhipster_website=self.webpackChunkjhipster_website||[]).push([[919],{92808:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var i=t(74848),s=t(28453);const r={title:"The User entity",slug:"/user-entity/",last_update:{date:new Date("2020-09-14T00:00:42.000Z")}},o=void 0,a={id:"user-entity",title:"The User entity",description:"This is not created for microservices using some kinds of security, as detailed here.",source:"@site/docs/user-entity.mdx",sourceDirName:".",slug:"/user-entity/",permalink:"/user-entity/",draft:!1,unlisted:!1,editUrl:"https://github.com/jhipster/jhipster.github.io/tree/main/docs/user-entity.mdx",tags:[],version:"current",lastUpdatedAt:1600041642e3,frontMatter:{title:"The User entity",slug:"/user-entity/",last_update:{date:"2020-09-14T00:00:42.000Z"}},sidebar:"docsSidebar",previous:{title:"Time Drift in Docker",permalink:"/tips/032_tip_time_drift_docker.html"},next:{title:"Remove the register account service",permalink:"/tips/034_tip_remove_register_account_service.html"}},l={},d=[{value:"Possible relationships",id:"possible-relationships",level:2},{value:"Modifying the User entity",id:"modifying-the-user-entity",level:2},{value:"Using composition",id:"using-composition",level:3},{value:"Using inheritance",id:"using-inheritance",level:3},{value:"Creating your own default User entity",id:"creating-your-own-default-user-entity",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["This is not created for microservices using some kinds of security, as detailed ",(0,i.jsx)(n.a,{href:"/creating-microservices",children:"here"}),"."]})}),"\n",(0,i.jsx)(n.p,{children:"This entity is a special entity as JHipster creates and manages it internally."}),"\n",(0,i.jsx)(n.p,{children:"It contains some basic information:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"a first name and a last name,"}),"\n",(0,i.jsx)(n.li,{children:"a login,"}),"\n",(0,i.jsx)(n.li,{children:"an email address,"}),"\n",(0,i.jsx)(n.li,{children:"a password (not in clear text),"}),"\n",(0,i.jsx)(n.li,{children:"authorities,"}),"\n",(0,i.jsx)(n.li,{children:"etc."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Creating an application from scratch will generate you some default users like the ",(0,i.jsx)(n.code,{children:"admin"})," or the ",(0,i.jsx)(n.code,{children:"guest"})," users."]}),"\n",(0,i.jsx)(n.h2,{id:"possible-relationships",children:"Possible relationships"}),"\n",(0,i.jsx)(n.p,{children:"Here are the possible relationships from/to this entity:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"many-to-one"})," relationships to this entity (a ",(0,i.jsx)(n.code,{children:"Car"})," can have a many-to-one relationship to a ",(0,i.jsx)(n.code,{children:"User"}),").\nThis will generate a specific query in your new entity repository, so you can filter your entity on the current\nsecurity user, which is a common requirement. On the generated Angular/React client UI you will have a dropdown in\n",(0,i.jsx)(n.code,{children:"Car"})," to select a ",(0,i.jsx)(n.code,{children:"User"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"many-to-many"})," and ",(0,i.jsx)(n.code,{children:"one-to-one"})," relationships to the ",(0,i.jsx)(n.code,{children:"User"})," entity, but the other entity ",(0,i.jsx)(n.strong,{children:"must"})," be the owner\nof the relationship (a ",(0,i.jsx)(n.code,{children:"Team"})," can have a many-to-many relationship to ",(0,i.jsx)(n.code,{children:"User"}),", but only the team can add/remove users,\nand a user cannot add/remove a team). On the front-end client UI, you will also be able to select a ",(0,i.jsx)(n.code,{children:"User"})," in\na multi-select box."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"modifying-the-user-entity",children:"Modifying the User entity"}),"\n",(0,i.jsxs)(n.p,{children:["If you encounter a problem where you need to alter the ",(0,i.jsx)(n.code,{children:"User"})," entity, we recommend not doing that.\nModifying this default entity might break your app depending on the nature of the changes."]}),"\n",(0,i.jsx)(n.p,{children:"Instead, there are other available solutions like:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["creating an entity composed of the ",(0,i.jsx)(n.code,{children:"User"})," entity,"]}),"\n",(0,i.jsxs)(n.li,{children:["extending the ",(0,i.jsx)(n.code,{children:"User"})," entity"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"using-composition",children:"Using composition"}),"\n",(0,i.jsx)(n.p,{children:"If you need to add a new field to the entity, or add relationships to it,\nall you need do is create another entity, for instance:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jdl",children:'entity ApplicationUser {\n  additionalField Integer min(42) max(42)\n}\n\nrelationship OneToOne {\n  ApplicationUser{internalUser(login)} to @OnDelete("CASCADE") @Id User with builtInEntity\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Here's what this snippet does:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["create a new entity named ",(0,i.jsx)(n.code,{children:"ApplicationUser"})," with a field,"]}),"\n",(0,i.jsxs)(n.li,{children:["create a relationship from this entity to the standard ",(0,i.jsx)(n.code,{children:"User"})," entity:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["we use a ",(0,i.jsx)(n.code,{children:"OneToOne"})," relationship to link a JHipster-created entity to this new one,"]}),"\n",(0,i.jsxs)(n.li,{children:["we use a unidirectional relationship in order not to modify the internally-managed ",(0,i.jsx)(n.code,{children:"User"})," entity."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["This is the recommended solution as it's doable using the JDL.\nThis solution is great for adding new fields and relationships (amongst other things) to the ",(0,i.jsx)(n.code,{children:"User"})," entity\nwithout actually modifying it."]}),"\n",(0,i.jsx)(n.h3,{id:"using-inheritance",children:"Using inheritance"}),"\n",(0,i.jsx)(n.p,{children:"This solution does the same thing as the previous one, but isn't as straightforward as the first one because you need to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"create a new entity by hand,"}),"\n",(0,i.jsx)(n.li,{children:"adapt the code to make it use this new entity,"}),"\n",(0,i.jsx)(n.li,{children:"potentially manage yourself the database migration to persist this new entity (depending on the nature of the changes)."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["It possesses, however, the same advantage as the previous one: you needn't change the ",(0,i.jsx)(n.code,{children:"User"})," entity by hand."]}),"\n",(0,i.jsx)(n.h3,{id:"creating-your-own-default-user-entity",children:"Creating your own default User entity"}),"\n",(0,i.jsxs)(n.p,{children:["This one isn't actually recommended, but is possible through the use of the user management skipping option\n(",(0,i.jsx)(n.code,{children:"skipUserManagement"})," application option in the JDL)."]}),"\n",(0,i.jsx)(n.p,{children:"JHipster uses this option internally in some cases (for some options), and using it will:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"not generate any user management code (front-end & back-end),"}),"\n",(0,i.jsxs)(n.li,{children:["allow you to update the ",(0,i.jsx)(n.code,{children:"User"})," entity (add/delete any field to it),"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Additionally, you'll have to create the entity and handle user management yourself."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["It's better to keep it ",(0,i.jsx)(n.code,{children:"false"})," as the first two solutions are quite easy to do"]}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(96540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);