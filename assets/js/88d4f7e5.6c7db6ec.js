"use strict";(self.webpackChunkjhipster_website=self.webpackChunkjhipster_website||[]).push([[3168],{41124:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>a,frontMatter:()=>l,metadata:()=>i,toc:()=>c});var s=t(74848),d=t(28453);const l={title:"JHipster Domain Language (JDL) - Deployments",slug:"/jdl/deployments",last_update:{date:new Date("2021-07-08T12:00:00.000Z")}},r=void 0,i={id:"jdl/deployments",title:"JHipster Domain Language (JDL) - Deployments",description:"Syntax",source:"@site/docs/jdl/deployments.mdx",sourceDirName:"jdl",slug:"/jdl/deployments",permalink:"/jdl/deployments",draft:!1,unlisted:!1,editUrl:"https://github.com/jhipster/jhipster.github.io/tree/main/docs/jdl/deployments.mdx",tags:[],version:"current",lastUpdatedAt:16257456e5,frontMatter:{title:"JHipster Domain Language (JDL) - Deployments",slug:"/jdl/deployments",last_update:{date:"2021-07-08T12:00:00.000Z"}},sidebar:"docsSidebar",previous:{title:"Options",permalink:"/jdl/options"},next:{title:"Troubleshooting",permalink:"/jdl/troubleshooting"}},o={},c=[{value:"Syntax",id:"syntax",level:2},{value:"Examples",id:"examples",level:2},{value:"Basic example",id:"basic-example",level:3},{value:"More than one deployment",id:"more-than-one-deployment",level:3},{value:"Available deployment options",id:"available-deployment-options",level:2}];function h(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,s.jsx)(n.p,{children:"The deployment declaration is done as follows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jdl",children:"deployment {\n  <deployment option name> <deployment option value>\n}\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Similar to applications, deployment declaration works by specifying option keys & values"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(n.h3,{id:"basic-example",children:"Basic example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jdl",children:'deployment {\n  deploymentType docker-compose\n  appsFolders [foo, bar]\n  dockerRepositoryName "yourDockerLoginName"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"more-than-one-deployment",children:"More than one deployment"}),"\n",(0,s.jsx)(n.p,{children:"If you want more than one deployment, here's how you do it:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jdl",children:"// will be created under the 'docker-compose' folder\ndeployment {\n  deploymentType docker-compose\n  appsFolders [foo, bar]\n  dockerRepositoryName \"yourDockerLoginName\"\n}\n\n// will be created under the 'kubernetes' folder\ndeployment {\n  deploymentType kubernetes\n  appsFolders [foo, bar]\n  dockerRepositoryName \"yourDockerLoginName\"\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You can have one deployment per ",(0,s.jsx)(n.code,{children:"deploymentType"}),". The applications defined in ",(0,s.jsx)(n.code,{children:"appsFolders"})," should be in the same\nfolder where you are creating deployments or in the folder defined in ",(0,s.jsx)(n.code,{children:"directoryPath"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"For example, above you need to have a folder structure like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:".\n\u251c\u2500\u2500 yourJdlFile.jdl\n\u251c\u2500\u2500 foo\n\u251c\u2500\u2500 bar\n\u251c\u2500\u2500 kubernetes // will be created by the JDL\n\u2514\u2500\u2500 docker-compose // will be created by the JDL\n"})}),"\n",(0,s.jsx)(n.h2,{id:"available-deployment-options",children:"Available deployment options"}),"\n",(0,s.jsx)(n.p,{children:"Here are the deployment options supported in the JDL:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"JDL option name"}),(0,s.jsx)(n.th,{children:"Default value"}),(0,s.jsx)(n.th,{children:"Possible values"}),(0,s.jsx)(n.th,{children:"Comment"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"deploymentType"}),(0,s.jsx)(n.td,{children:"docker-compose"}),(0,s.jsx)(n.td,{children:"docker-compose, kubernetes, openshift"}),(0,s.jsx)(n.td,{children:"-"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"directoryPath"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"../"})}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Relative path. Must be in double quotes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"appsFolders"}),(0,s.jsx)(n.td,{children:"[]"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Directory names for the applications separated by comma. Must be a list, example [foo, bar]"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"clusteredDbApps"}),(0,s.jsx)(n.td,{children:"[]"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Directory names for the applications with clustered DB separated by comma. Must be a list, example [foo, bar]"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"gatewayType"}),(0,s.jsx)(n.td,{children:"SpringCloudGateway"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsxs)(n.td,{children:["Value is ignored when serviceDiscoveryType is ",(0,s.jsx)(n.code,{children:"no"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"monitoring"}),(0,s.jsx)(n.td,{children:"no"}),(0,s.jsx)(n.td,{children:"no, prometheus"}),(0,s.jsx)(n.td,{children:"-"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"serviceDiscoveryType"}),(0,s.jsx)(n.td,{children:"consul"}),(0,s.jsx)(n.td,{children:"consul, eureka, no"}),(0,s.jsx)(n.td,{children:"-"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dockerRepositoryName"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"The name or URL of the docker repository. Must be in double quotes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"dockerPushCommand"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"docker push"})}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"The docker push command to use. Must be in double quotes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"kubernetesNamespace"}),(0,s.jsx)(n.td,{children:"default"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Applicable only when deploymentType is kubernetes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"kubernetesUseDynamicStorage"}),(0,s.jsx)(n.td,{children:"false"}),(0,s.jsx)(n.td,{children:"true, false"}),(0,s.jsx)(n.td,{children:"Applicable only when deploymentType is kubernetes, enables the kubernetesStorageClassName option"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"kubernetesStorageClassName"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Applicable only when deploymentType is kubernetes, can be left empty (two double-quotes)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"kubernetesServiceType"}),(0,s.jsx)(n.td,{children:"LoadBalancer"}),(0,s.jsx)(n.td,{children:"LoadBalancer, NodePort, Ingress"}),(0,s.jsx)(n.td,{children:"Applicable only when deploymentType is kubernetes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ingressDomain"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsxs)(n.td,{children:["The domain for Ingress when kubernetesServiceType is ",(0,s.jsx)(n.code,{children:"Ingress"}),". Must be in double quotes. Applicable only when deploymentType is kubernetes"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ingressType"}),(0,s.jsx)(n.td,{children:"nginx"}),(0,s.jsx)(n.td,{children:"nginx, gke"}),(0,s.jsxs)(n.td,{children:["The kubernetes ingress type, only set when ",(0,s.jsx)(n.code,{children:"kubernetesServiceType"})," is set to Ingress"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"istio"}),(0,s.jsx)(n.td,{children:"false"}),(0,s.jsx)(n.td,{children:"true, false"}),(0,s.jsx)(n.td,{children:"Applicable only when deploymentType is kubernetes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"openshiftNamespace"}),(0,s.jsx)(n.td,{children:"default"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"Applicable only when deploymentType is openshift"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"storageType"}),(0,s.jsx)(n.td,{children:"ephemeral"}),(0,s.jsx)(n.td,{children:"ephemeral, persistent"}),(0,s.jsx)(n.td,{children:"Applicable only when deploymentType is openshift"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"registryReplicas"}),(0,s.jsx)(n.td,{children:"2"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:"The number of replicas, when using the openshift deployment type"})]})]})]})]})}function a(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>i});var s=t(96540);const d={},l=s.createContext(d);function r(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);