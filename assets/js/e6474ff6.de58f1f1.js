"use strict";(self.webpackChunkjhipster_website=self.webpackChunkjhipster_website||[]).push([[4103],{12711:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var o=t(74848),r=t(28453);const i={title:"Combining generation and custom code",slug:"/tips/035_tip_combine_generation_and_custom_code.html",last_update:{date:new Date("2021-09-09T21:22:00.000Z")}},s=void 0,a={id:"tips/tip_combine_generation_and_custom_code",title:"Combining generation and custom code",description:"Tip submitted by @tcharl",source:"@site/docs/tips/035_tip_combine_generation_and_custom_code.mdx",sourceDirName:"tips",slug:"/tips/035_tip_combine_generation_and_custom_code.html",permalink:"/tips/035_tip_combine_generation_and_custom_code.html",draft:!1,unlisted:!1,editUrl:"https://github.com/jhipster/jhipster.github.io/tree/main/docs/tips/035_tip_combine_generation_and_custom_code.mdx",tags:[],version:"current",lastUpdatedAt:163122252e4,sidebarPosition:35,frontMatter:{title:"Combining generation and custom code",slug:"/tips/035_tip_combine_generation_and_custom_code.html",last_update:{date:"2021-09-09T21:22:00.000Z"}},sidebar:"docsSidebar",previous:{title:"Remove the register account service",permalink:"/tips/034_tip_remove_register_account_service.html"},next:{title:"Allow common web fonts in Spring Security",permalink:"/tips/036_tip_allow_common_web_fonts_in_spring_security.html"}},d={},c=[{value:"Pattern 1 - Generate once",id:"pattern-1---generate-once",level:2},{value:"Pro",id:"pro",level:3},{value:"Con",id:"con",level:3},{value:"Pattern 2 - Split generated code and custom code",id:"pattern-2---split-generated-code-and-custom-code",level:2},{value:"Pro",id:"pro-1",level:3},{value:"Con",id:"con-1",level:3},{value:"Pattern 3 - Side by side",id:"pattern-3---side-by-side",level:2},{value:"Repository",id:"repository",level:3},{value:"Service",id:"service",level:3},{value:"Controller",id:"controller",level:3},{value:"Angular",id:"angular",level:3},{value:"Pro",id:"pro-2",level:3},{value:"Con",id:"con-2",level:3}];function l(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.strong,{children:["Tip submitted by ",(0,o.jsx)(n.a,{href:"https://github.com/tcharl",children:"@tcharl"})]})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.em,{children:"Goal:"})," Jhipster is very good for managing your model entities, thanks to its powerful Domain Specific language.\nBut getting the best both custom code and generative world is  always a hard task.\nHere are the different pattern you can adopt in order to make it real."]}),"\n",(0,o.jsx)(n.h2,{id:"pattern-1---generate-once",children:"Pattern 1 - Generate once"}),"\n",(0,o.jsx)(n.p,{children:"This approach is the simplest one, and used in most of the use case.\nIt consists in modeling your entities once, generate the first model, then override what you want after this first shot.\nIf one day you want to resync, you can always regen in another branch, the compare both codes through your IDE.\nHowever, that later process is always painful and you can spend days for a major upgrade."}),"\n",(0,o.jsx)(n.h3,{id:"pro",children:"Pro"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Do what you want"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"con",children:"Con"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"You'll tend do not benefit from JHipster new features"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"pattern-2---split-generated-code-and-custom-code",children:"Pattern 2 - Split generated code and custom code"}),"\n",(0,o.jsx)(n.p,{children:"With this one, you'll try to avoid modifying generated class and to host your custom code in dedicated ones.\nHere, you can use the --with-generated-flag jhipster cli option in order to easily differentiate the generated classes from your custom ones.\nFinally, you'll only modify the main router on frontend part in order to route to your custom home page instead of the generated one."}),"\n",(0,o.jsxs)(n.p,{children:["In order to avoid your router file being overridden at each generation, you can create a ",(0,o.jsx)(n.code,{children:".yo-resolve"})," file at the root of your project and tell to yeoman the expected behavior."]}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"src/main/resources/swagger/api.yml skip\nsrc/main/webapp/app/modules/home/home.tsx skip\n"})}),"\n",(0,o.jsx)(n.h3,{id:"pro-1",children:"Pro"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Can combine generation and custom code without so much hassle"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"con-1",children:"Con"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Dead code"}),"\n",(0,o.jsx)(n.li,{children:"Custom classes that have different names or package than your model (can be considered as a DDD best practice but still)."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"pattern-3---side-by-side",children:"Pattern 3 - Side by side"}),"\n",(0,o.jsx)(n.p,{children:"Here, the goal is to use classes extensions and beans precedence in order to inject your custom code instead of the generated one."}),"\n",(0,o.jsxs)(n.p,{children:["Let's take an example with a ",(0,o.jsx)(n.code,{children:"Customer"})," jhipster entity."]}),"\n",(0,o.jsx)(n.h3,{id:"repository",children:"Repository"}),"\n",(0,o.jsxs)(n.p,{children:["At the repository level, you'll annotate jhipster generated repository using ",(0,o.jsx)(n.code,{children:"NoRepositoryBean"})," annotation in order to disable discovery.\nYou can then create your custom repository class"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"@Repository\n@Primary\nMemberRepositoryPrimary extends MemberRepository\n"})}),"\n",(0,o.jsx)(n.h3,{id:"service",children:"Service"}),"\n",(0,o.jsxs)(n.p,{children:["Here, you'll use the ",(0,o.jsx)(n.code,{children:"serviceImpl"})," option in order to be able to inject your custom Bean in your Controller.\nThen, you can simply extends the generated service and annotate your bean with ",(0,o.jsx)(n.code,{children:"@Primary"})," in order to get precedence."]}),"\n",(0,o.jsx)(n.h3,{id:"controller",children:"Controller"}),"\n",(0,o.jsxs)(n.p,{children:["You'll use another API prefix for your custom endpoints (for example ",(0,o.jsx)(n.code,{children:"/api/v2"}),")."]}),"\n",(0,o.jsx)(n.h3,{id:"angular",children:"Angular"}),"\n",(0,o.jsxs)(n.p,{children:["Same extension applies on the frontend side, you can then configure your beans precedence in the ",(0,o.jsx)(n.code,{children:"app.module.ts"})," file:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"providers: [\n// keep other entries\n{ provide: MemberDomainService, useExisting: MemberDomainServicePrimary },\n]\n"})}),"\n",(0,o.jsx)(n.h3,{id:"pro-2",children:"Pro"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Can override generated code behavior"}),"\n",(0,o.jsx)(n.li,{children:"Easy to find custom code"}),"\n",(0,o.jsx)(n.li,{children:"Keep the Jhipster best layout even for custom code"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"con-2",children:"Con"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"File duplication"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var o=t(96540);const r={},i=o.createContext(r);function s(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);