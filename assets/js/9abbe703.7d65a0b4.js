"use strict";(self.webpackChunkjhipster_website=self.webpackChunkjhipster_website||[]).push([[6482],{13295:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var s=t(74848),i=t(28453);const r={title:"How to use JHipster with MS SQL Server",slug:"/tips/004_tip_using_ms_sql_server.html",last_update:{date:new Date("2016-12-01T00:00:00.000Z")}},a=void 0,o={id:"tips/tip_using_ms_sql_server",title:"How to use JHipster with MS SQL Server",description:"Tip submitted by @Zyst",source:"@site/docs/tips/004_tip_using_ms_sql_server.mdx",sourceDirName:"tips",slug:"/tips/004_tip_using_ms_sql_server.html",permalink:"/tips/004_tip_using_ms_sql_server.html",draft:!1,unlisted:!1,editUrl:"https://github.com/jhipster/jhipster.github.io/tree/main/docs/tips/004_tip_using_ms_sql_server.mdx",tags:[],version:"current",lastUpdatedAt:14805504e5,sidebarPosition:4,frontMatter:{title:"How to use JHipster with MS SQL Server",slug:"/tips/004_tip_using_ms_sql_server.html",last_update:{date:"2016-12-01T00:00:00.000Z"}}},l={},c=[{value:"MSSQL Support has been added to the generator since this pull request #4589, so you don&#39;t need to do any specific configuration anymore!",id:"mssql-support-has-been-added-to-the-generator-since-this-pull-request-4589-so-you-dont-need-to-do-any-specific-configuration-anymore",level:4}];function d(e){const n={a:"a",code:"code",em:"em",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["Tip submitted by ",(0,s.jsx)(n.a,{href:"https://github.com/Zyst",children:"@Zyst"})]})}),"\n",(0,s.jsxs)(n.h4,{id:"mssql-support-has-been-added-to-the-generator-since-this-pull-request-4589-so-you-dont-need-to-do-any-specific-configuration-anymore",children:["MSSQL Support has been added to the generator since this ",(0,s.jsx)(n.a,{href:"https://github.com/jhipster/generator-jhipster/pull/4589",children:"pull request #4589"}),", so you don't need to do any specific configuration anymore!"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"Goal:"})," By the end of this tutorial you will have the default JHipster application running on your SQL Server, with everything being functional."]}),"\n",(0,s.jsxs)(n.p,{children:["Start by running JHipster normally with ",(0,s.jsx)(n.code,{children:"jhipster"}),", select the options to use token based authentication, SQL, MySQL as the dev. database, MySQL as the prod. database, Yes with ehcache, No Elasticsearch, No clustered HTTP, No Websockets, Maven, Grunt, and no Sass."]}),"\n",(0,s.jsxs)(n.p,{children:["We then add the MS SQL Server JDBC dependency to the project ",(0,s.jsx)(n.code,{children:"pom.xml"})," file."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"pom.xml"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"    [...]\n    \x3c!-- Microsoft JDBC --\x3e\n    <dependency>\n        <groupId>com.microsoft.sqlserver</groupId>\n        <artifactId>sqljdbc41</artifactId>\n        <version>4.1</version>\n    </dependency>\n    \x3c!-- Liquibase MS SQL Server extensions --\x3e\n    <dependency>\n        <groupId>com.github.sabomichal</groupId>\n        <artifactId>liquibase-mssql</artifactId>\n        <version>1.4</version>\n    </dependency>\n    [...]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["I am using Sql JDBC 4.1, and already have it installed to my personal repository, but if you do not this will not work without some further configuration, check out ",(0,s.jsx)(n.a,{href:"https://stackoverflow.com/questions/30207842/add-external-library-jar-to-spring-boot-jar-internal-lib",children:"this"})," stackoverflow question for further reference."]}),"\n",(0,s.jsx)(n.p,{children:"The Liquibase MS SQL Server extension allows you to do some neat stuff we will be using later on in this tutorial."}),"\n",(0,s.jsx)(n.p,{children:"##Database modification"}),"\n",(0,s.jsxs)(n.p,{children:["Go into ",(0,s.jsx)(n.code,{children:"src\\main\\resources\\config\\application-dev.yml"})," and change your application to use the new datasource, and your Hibernate configuration to use the SQL Server dialect as seen below:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"application-dev.yml"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"    spring:\n        profiles:\n            active: dev\n        datasource:\n            driver-class-name: com.microsoft.sqlserver.jdbc.SQLServerDataSource\n            url: jdbc:sqlserver://localhost:1433;databaseName=test\n            databaseName:\n            serverName:\n            username: myuser\n            password: supersecretpassword\n            cachePrepStmts: true\n            prepStmtCacheSize: 250\n            prepStmtCacheSqlLimit: 2048\n            useServerPrepStmts: true\n\n        jpa:\n            database-platform: org.hibernate.dialect.SQLServerDialect\n            database: SQL_SERVER\n            openInView: false\n            show_sql: true\n            generate-ddl: false\n            [...]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This assuming your database is called ",(0,s.jsx)(n.code,{children:"test"}),", change your connection url as necessary."]}),"\n",(0,s.jsxs)(n.p,{children:["Now go into ",(0,s.jsx)(n.code,{children:"*\\src\\main\\resources\\config\\liquibase\\changelog\\00000000000000_initial_schema.xml"})," and at the top of the file change the following properties:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"00000000000000_initial_schema.xml"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'    <databaseChangeLog\n        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"\n        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"\n        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd\n        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">\n\n        <property name="now" value="now()" dbms="mysql,h2"/>\n        <property name="now" value="current_timestamp" dbms="postgresql"/>\n        <property name="now" value="GETDATE()" dbms="mssql"/>\n\n        <changeSet id="00000000000000" author="jhipster" dbms="postgresql">\n            <createSequence sequenceName="hibernate_sequence" startValue="1000" incrementBy="1"/>\n        </changeSet>\n        [...]\n'})}),"\n",(0,s.jsxs)(n.p,{children:["First, make sure you changed your xml databaseChangeLog property to include the ext. Now inside ",(0,s.jsx)(n.code,{children:"src\\main\\resources\\config\\liquibase\\changelog\\00000000000000_initial_schema.xml"})," find the data entries and change them:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'_00000000000000_initial_schema.xml_\n\n    <ext:loadData encoding="UTF-8"\n              file="config/liquibase/users.csv"\n              separator=";"\n              tableName="JHI_USER" identityInsertEnabled="true">\n        <column name="activated" type="boolean"/>\n        <column name="created_date" type="timestamp"/>\n    </ext:loadData>\n    <dropDefaultValue tableName="JHI_USER" columnName="created_date" columnDataType="datetime"/>\n\n    <ext:loadData encoding="UTF-8"\n                  file="config/liquibase/authorities.csv"\n                  separator=";"\n                  tableName="JHI_AUTHORITY"\n                  identityInsertEnabled="true" />\n\n    <ext:loadData encoding="UTF-8"\n                  file="config/liquibase/users_authorities.csv"\n                  separator=";"\n                  tableName="JHI_USER_AUTHORITY"\n                  identityInsertEnabled="true" />\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Adding the ",(0,s.jsx)(n.code,{children:'identityInsertEnabled="true"'})," is the same as wrapping your Inserts with ",(0,s.jsx)(n.code,{children:"IDENTITY_INSERT ON"})," and ",(0,s.jsx)(n.code,{children:"IDENTITY_INSERT OFF"})," which will allow you to insert the project autogenerated identities directly. This is why we are using the MS SQL Server Liquibase for."]}),"\n",(0,s.jsx)(n.p,{children:"Now try running your application! Everything should be working and you should be on your way to continue using your JHipster application with SQL Server."})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var s=t(96540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);